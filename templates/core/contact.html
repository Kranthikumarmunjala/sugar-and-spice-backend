{% extends 'core/base.html' %}
{% load static %}

{% block title %}{% if base_config %}{{ base_config.title }}{% endif %} - Contact Us{% endblock title %}

{% block content %}
<main>
   {# The message display area is now handled by base.html, so it doesn't need to be here. #}
   {# However, if you want it ONLY on this page, you can uncomment the block below. #}
   {#
   {% if messages %}
       <div class="messages" style="text-align: center; padding: 10px;">
           {% for message in messages %}
               <div class="alert alert-{{ message.tags }}" style="padding: 15px; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; border-radius: 5px;">
                   {{ message }}
               </div>
           {% endfor %}
       </div>
   {% endif %}
   #}

   {% if contact_config %}
   <section class="content-page-section contact-page">
       <div class="content-image">
           {% if contact_config.image %}
               <img src="{{ contact_config.image.url }}" alt="{{ contact_config.title }}">
           {% endif %}
       </div>
       <div class="content-text contact-details">
           <h2>{{ contact_config.title }}</h2>
           <div class="contact-info">
               <p>{{ contact_config.address }}</p>
               <p>{{ contact_config.site_email }} | {{ contact_config.phone }}</p>
               <p>{{ contact_config.text }}</p>
           </div>

           <form class="contact-form" method="POST" action="{% url 'contact' %}">
               {% csrf_token %}
               <div class="form-row">
                   <div class="form-group">
                       <label for="contact-first-name">First name *</label>
                       <input type="text" id="contact-first-name" name="first-name" required>
                   </div>
                   <div class="form-group">
                       <label for="contact-last-name">Last name *</label>
                       <input type="text" id="contact-last-name" name="last-name" required>
                   </div>
               </div>
               <div class="form-group">
                   <label for="contact-email">Email *</label>
                   <input type="email" id="contact-email" name="email" required>
               </div>
               <div class="form-group">
                   <label for="contact-phone">Phone</label>
                   <input type="tel" id="contact-phone" name="phone">
               </div>
               <div class="form-group">
                   <label for="contact-message">Type your message here...</label>
                   <textarea id="contact-message" name="message" rows="5"></textarea>
               </div>
               <button type="submit" class="submit-btn">Submit</button>
           </form>
       </div>
   </section>
  
   <section class="map-section" id="map-section">
        {% if contact_config.map_url %}
            <iframe src="{{ contact_config.map_url }}" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        {% endif %}
   </section>
   {% else %}
    <p style="text-align:center; padding: 40px;">Contact page content has not been configured in the admin panel.</p>
   {% endif %}
   
   <div class="star-divider">
       <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-of-life center-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
   </div>
</main>
{% endblock content %}